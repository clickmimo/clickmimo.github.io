---
layout: post
permalink: /posts/thm/basic-pentesting
title: "Basic Pentesting"
---

Amazing challenge for beginners. 
Some of the pictures aren't directly from the terminal because I have already passed through the rooms and I saved them in txt files, sorry about that. Let's the fun begin.

First thing first we have to scan the target machine and we are going to use nmap for that purpose.
In my case the target machine has 10.10.252.33 IP address.

```
nmap -sC -sV 10.10.252.33
```

![nmap-scan](/assets/images/thm/basic-pentesting/nmap-scan.png)

From the nmap scan we can see there is some open ports:
22
80 
139
445
8009
8080

Unfortunately visiting the website doesn't provide us any useful information.

![web-page](/assets/images/thm/basic-pentesting/web-page.png)

We need to scan the web directories. I'm going to use gobuster but you can use any other web scanner.

```
gobuster dir -u http://10.10.252.33/ -w ~/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt
```

![gobuster-scan.png](/assets/images/thm/basic-pentesting/gobuster-scan.png)

Based on the result we are going to visit /development page and we are finding two files

![chat1](/assets/images/thm/basic-pentesting/chat1.png)

and

![chat2](/assets/images/thm/basic-pentesting/chat2.png)

Let's try to enumerate Samba server. We can do that with enum4linux

```
enum4linux -a 10.10.252.33
```
![enum4linux-scan](/assets/images/thm/basic-pentesting/enum4linux-scan.png)

We have found two users kay and jan. Lets try to brute force jan user's password.

```
hydra -l jan -P rockyou.txt ssh://10.10.252.33
```
![hydra-result](/assets/images/thm/basic-pentesting/hydra-result.png)

We have successfully carcked the jan's password: armando
Now ssh with jan:armando

Looking around the system we find that we have access to the kay directory and we are able to read his rsa key. Copy the rsa key and try to ssh with the user kay. 
We have to change the mode.

```
chmod 600 kay_id_rsa
```

Oops, we need a password. Fortunately John the Ripper has a script which allows us to hash rsa keys

```
python3 ssh2john.py kay_id_rsa > kay_id_rsa_hash.txt
```
Now after we have the rsa hash we can crack it.

```
john kay_id_rsa_hash.txt --wordlist=rockyou.txt
```

![john-result](/assets/images/thm/basic-pentesting/john-result.png)

Here we go. ssh the target with kay's credentials and see what is hidden in pass.bak
